<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>通知スケジューラー</title>
  <link rel="manifest" href="/manifest.json" />
  <link rel="icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiByeD0iMTAiIGZpbGw9IiMzYjgyZjYiLz4KPHBhdGggZD0iTTQwIDEzYTIgMiAwIDEgMC0zIDAgMiAyIDAgMCAwIDMgMFpNNDMgMTZMMzkuNSAxMC43QTMuNSAzLjUgMCAwIDAgMzYuOSAxMEg0M0oiIGZpbGw9IiNmZmYiLz4KPC9zdmc+" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <header class="header">
<div class="logo">
  <img src="assets/logo.png" alt="通知スケジューラーのロゴ">
  <h1>通知スケジューラー</h1>
</div>
      <nav class="nav">
        <a href="kbc-rakv0.vercel.app">ホーム</a>
        <a href="#list">通知一覧</a>
        <a href="#settings">設定</a>
      </nav>
    </header>

    <section class="hero">
      <h2>予定時刻を通知でお知らせ</h2>
      <p>時間を指定することで通知を送ります</p>
    </section>

    <div class="grid">
      <!-- 新規作成 -->
      <div class="card" id="create">
        <h3>新しい通知を作成</h3>
        <form id="createForm">
          <label>通知メッセージ</label>
          <input type="text" id="message" placeholder="例: 強襲" required />

          <label>モード</label>
          <select id="mode">
            <option value="after">◯時間◯分後</option>
            <option value="at">何時何分に通知</option>
          </select>

          <!-- after mode -->
          <div id="afterInputs">
            <div class="time-inputs">
              <input type="number" id="hours" placeholder="時間" min="0" value="0" />
              <input type="number" id="minutes" placeholder="分" min="0" max="59" value="30" />
            </div>
            <label>ループ回数（0=繰り返さない）</label>
            <input type="number" id="loopCount" min="0" value="0" />
          </div>

          <!-- at mode -->
          <div id="atInputs" style="display:none;">
            <div class="time-inputs">
              <input type="number" id="hourAt" placeholder="時" min="0" max="23" />
              <input type="number" id="minuteAt" placeholder="分" min="0" max="59" />
            </div>
            <label>繰り返しモード</label>
            <select id="repeatAt">
              <option value="none">一度だけ</option>
              <option value="weekly">毎週（曜日選択）</option>
              <option value="monthly">毎月（日指定）</option>
            </select>

            <div id="weeklySelect" style="display:none;">
              <label>曜日を選択</label>
              <div class="weekday-chips">
                <label><input type="checkbox" value="0">日</label>
                <label><input type="checkbox" value="1">月</label>
                <label><input type="checkbox" value="2">火</label>
                <label><input type="checkbox" value="3">水</label>
                <label><input type="checkbox" value="4">木</label>
                <label><input type="checkbox" value="5">金</label>
                <label><input type="checkbox" value="6">土</label>
              </div>
            </div>

            <div id="monthlySelect" style="display:none;">
              <label>日（1-31）</label>
              <input type="number" id="monthDay" min="1" max="31" />
            </div>
          </div>

          <label>通知タイプ</label>
          <select id="notifyType">
            <option value="browser">ブラウザ通知</option>
            <option value="popup">ポップアップ（画面上部）</option>
            <option value="both">両方</option>
          </select>

          <label>タイムゾーン</label>
          <select id="timezone">
            <option value="Asia/Tokyo" selected>日本 (JST)</option>
            <option value="UTC">UTC</option>
          </select>

          <div style="margin-top:12px;">
            <button type="submit" class="btn">登録する</button>
          </div>
        </form>
        <p class="muted">※ タイマーの最小単位は「分」です。</p>
      </div>

      <!-- 通知一覧 -->
      <div class="card" id="list">
        <h3>通知一覧</h3>
        <div id="listContainer"></div>
      </div>

      <!-- 設定 -->
      <div class="card" id="settings">
        <h3>設定</h3>
        <label><input type="checkbox" id="soundToggle" checked /> 通知音を鳴らす</label>
        <label><input type="checkbox" id="usePWAToggle" /> PWA（ホームに追加）を案内</label>
        <p class="muted">通知許可がまだの場合は、上部の「通知を有効にする」ボタンを押してください。</p>
        <div style="margin-top:10px;">
          <button id="requestPermission" class="btn">通知を有効にする</button>
          <button id="installPWA" class="btn" style="display:none">ホーム画面に追加</button>
        </div>
      </div>
    </div>

    <footer>© 2025 通知スケジューラー</footer>
  </div>

  <!-- LINE風通知領域 -->
  <div id="notifArea" class="notif-area top"></div>

  <audio id="ding" src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEAgD4AAAB9AAACABAAZGF0YQAAAAA="></audio>

  <script src="script.js" defer></script>
</body>
</html>