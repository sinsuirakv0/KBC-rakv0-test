<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>KBC</title>
  <style>
    :root {
      --bg:#0b1220; --card:#071427; --muted:#9fb0c8; --accent:#3b82f6;
      --glass: rgba(255,255,255,0.03); --text:#e6f0fb;
    }
    *{box-sizing:border-box;}
    body{
      margin:0;
      font-family:"Noto Sans JP",sans-serif;
      background:linear-gradient(180deg,#051026 0%,#081428 60%);
      color:var(--text);
      padding:20px;
      display:flex;
      justify-content:center;
      animation: fadeIn 1s ease forwards;
      opacity:0;
    }

    @keyframes fadeIn {
      from { opacity:0; transform: translateY(10px); }
      to { opacity:1; transform: translateY(0); }
    }

    .container{
      width:1100px;
      max-width:100%;
      display:grid;
      gap:16px;
    }
    .header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      flex-wrap:wrap;
      padding:10px 0;
      border-bottom:1px solid rgba(255,255,255,0.1);
      animation: fadeIn 1s ease 0.2s forwards;
      opacity:0;
    }
    .logo{
      display:flex;
      align-items:center;
      gap:10px;
    }
    .logo img{
      width:40px;
      height:40px;
      border-radius:8px;
      box-shadow:0 0 10px rgba(59,130,246,0.4);
      animation: floatLogo 3s ease-in-out infinite;
    }
    @keyframes floatLogo {
      0%,100% { transform: translateY(0); }
      50% { transform: translateY(-4px); }
    }
    h1{margin:0;font-size:22px;}
    .nav{
      display:flex;
      gap:20px;
      flex-wrap:wrap;
    }
    .nav a{
      color:var(--muted);
      text-decoration:none;
      font-size:14px;
      transition:0.2s;
    }
    .nav a:hover{
      color:var(--accent);
    }

    .hero{
      text-align:center;
      padding:60px 20px;
      background:var(--card);
      border-radius:12px;
      box-shadow:0 8px 30px rgba(2,6,23,0.6);
      animation: fadeIn 1s ease 0.4s forwards;
      opacity:0;
    }
    .hero h2{
      font-size:28px;
      margin:0 0 10px;
    }
    .hero p{
      color:var(--muted);
      font-size:15px;
      margin:0;
    }

    .grid{
      display:grid;
      grid-template-columns:repeat(auto-fit, minmax(280px,1fr));
      gap:16px;
    }
    .card{
      background:var(--card);
      border-radius:12px;
      padding:20px;
      box-shadow:0 8px 30px rgba(2,6,23,0.6);
      transition:transform 0.3s, box-shadow 0.3s;
      opacity:0;
      animation: fadeIn 1s ease forwards;
    }
    .card:nth-child(1){animation-delay:0.6s;}
    .card:nth-child(2){animation-delay:0.8s;}
    .card:nth-child(3){animation-delay:1s;}
    .card:nth-child(4){animation-delay:1.2s;}
    .card:nth-child(5){animation-delay:1.4s;}
    .card:nth-child(6){animation-delay:1.6s;}
    .card:nth-child(7){animation-delay:1.8s;}
    .card:hover{
      transform:translateY(-6px);
      box-shadow:0 10px 40px rgba(59,130,246,0.3);
    }
    .card h3{
      margin-top:0;
      font-size:18px;
      color:var(--accent);
    }
    .card p{
      font-size:14px;
      color:var(--muted);
    }

    footer{
      text-align:center;
      color:var(--muted);
      font-size:13px;
      margin-top:30px;
      border-top:1px solid rgba(255,255,255,0.05);
      padding-top:10px;
      animation: fadeIn 1s ease 1.2s forwards;
      opacity:0;
    }
  </style>
</head>
<body>
  <div class="container">
    <header class="header">
      <div class="logo">
        <img src="logo.png" alt="ロゴ">
        <h1>KBC</h1>
      </div>
      <nav class="nav">
        <a href="#">  </a>
        <a href="#"></a>
        <a href="#"></a>
        <a href="#"></a>
      </nav>
    </header>  

    <section class="hero">
      <h2>ようこそ！</h2>
      <p>ChatGPTを使用し作成したサイト一覧です。</p>
    </section>

    <section class="grid">
      <div class="card">
        <h3><a href="https://docs.google.com/spreadsheets/d/1GpFy0E2S3LWc00OFm5hDqTEjPNB23izn/edit?usp=drivesdk&ouid=117013121971991290479&rtpof=true&sd=true" style="color:var(--accent);text-decoration:none;">Excelテーブル表</a></h3>
        <p>正確性は劣りますが、拡張性は高いです。</p>
      </div>
      <div class="card">
        <h3><a href="CatFood-Efficiency-Calculator.html" style="color:var(--accent);text-decoration:none;">缶効率計算機</a></h3>
        <p>缶効率を計算します。個人的な缶管理に。</p>
      </div>
      <div class="card">
        <h3><a href="Address-Calculator.html" style="color:var(--accent);text-decoration:none;">アドレス計算機</a></h3>
        <p>GGのアドレス計算に使えます。</p>
      </div>
      <div class="card">
        <h3><a href="Seed-Calculator.html" style="color:var(--accent);text-decoration:none;">シード計算機</a></h3>
        <p>ロール数の計算や、前後シードの計算ができます。</p>
      </div>
      <div class="card">
        <h3><a href="time-zone.HTML" style="color:var(--accent);text-decoration:none;">タイムゾーン確認</a></h3>
        <p>仮</p>
      </div>
      <div class="card">
        <h3><a href="https://kbc-rakv0-announce.vercel.app/" style="color:var(--accent);text-decoration:none;">通知スケジューラー</a></h3>
        <p>特定の時間に〇〇と通知します。強襲の時間管理などにどうぞ。</p>
      </div>
    </section>

  </div>
</body>

<script>
/* ===== XORSHIFT32 任意回数ジャンプ対応 ===== */
function randomUint32() {
  const buf = new Uint32Array(1);
  crypto.getRandomValues(buf);
  return buf[0] >>> 0;
}
function xorshift32_step(x) {
  x = x >>> 0;
  x ^= (x << 13) >>> 0;
  x ^= x >>> 17;
  x ^= (x << 15) >>> 0;
  return x >>> 0;
}
function stepMatrix() {
  const mat = new Uint32Array(32);
  for (let j = 0; j < 32; j++) mat[j] = xorshift32_step(1 << j) >>> 0;
  return mat;
}
function applyMatrix(mat, v) {
  let out = 0 >>> 0;
  let x = v >>> 0;
  while (x) {
    const lsb = x & -x;
    const idx = 31 - Math.clz32(lsb);
    out ^= mat[idx];
    x &= x - 1;
  }
  return out >>> 0;
}
function composeMatrices(A, B) {
  const R = new Uint32Array(32);
  for (let j = 0; j < 32; j++) R[j] = applyMatrix(B, A[j]) >>> 0;
  return R;
}
function matrixPow(mat, n) {
  let result = new Uint32Array(32);
  for (let j = 0; j < 32; j++) result[j] = (1 << j) >>> 0;
  let base = mat;
  let e = n >>> 0;
  while (e > 0) {
    if (e & 1) result = composeMatrices(result, base);
    e = Math.floor(e / 2);
    if (e > 0) base = composeMatrices(base, base);
  }
  return result;
}
function advanceXorshift32(seed, n) {
  n = n >>> 0;
  if (n === 0) return seed >>> 0;
  const M = stepMatrix();
  const Mpow = matrixPow(M, n);
  return applyMatrix(Mpow, seed) >>> 0;
}

/* ===== ロゴクリックトリガー ===== */
let clickTimes = [];
const logo = document.querySelector(".logo img");
let overlayOpen = false;
if (logo) {
  logo.style.cursor = "pointer";
  logo.addEventListener("click", () => {
    const now = Date.now();
    clickTimes.push(now);
    clickTimes = clickTimes.filter(t => now - t < 1000);
    if (clickTimes.length >= 5 && !overlayOpen) {
      clickTimes = [];
      showSecretPrompt();
    }
  });
}

/* ===== メイン処理 ===== */
function showSecretPrompt() {
  overlayOpen = true;

  // 要素生成
  const overlay = document.createElement("div");
  overlay.style.position = "fixed";
  overlay.style.inset = "0";
  overlay.style.background = "rgba(0,0,0,0.88)";
  overlay.style.color = "#fff";
  overlay.style.display = "flex";
  overlay.style.justifyContent = "center";
  overlay.style.alignItems = "center";
  overlay.style.zIndex = 9999;
  overlay.style.fontFamily = "JetBrains Mono, monospace";
  overlay.style.textAlign = "center";
  overlay.style.padding = "20px";

  const card = document.createElement("div");
  card.style.maxWidth = "520px";
  card.style.width = "100%";
  card.style.background = "#071427";
  card.style.borderRadius = "12px";
  card.style.padding = "20px";
  card.style.boxShadow = "0 8px 40px rgba(2,6,23,0.6)";
  card.style.color = "#e6f0fb";

  function hex32(n) {
    return "0x" + (n >>> 0).toString(16).toUpperCase().padStart(8, "0");
  }

  card.innerHTML = `
    <h2 style="margin:0 0 8px;color:#3b82f6;">KBC Secret Access</h2>
    <p style="margin:0 0 12px;color:#9fb0c8;font-size:14px;">こんにちは</p>
    <div style="text-align:left;margin-bottom:12px;">
      <div style="font-size:12px;color:#9fb0c8;">CODE A</div>
      <div style="font-weight:700;margin:6px 0;" id="kbcA"></div>
      <div style="font-size:12px;color:#8ea0b8;" id="kbcAhex"></div>

      <div style="height:10px;"></div>

      <div style="font-size:12px;color:#9fb0c8;">CODE B</div>
      <div style="font-weight:700;margin:6px 0;" id="kbcB"></div>
      <div style="font-size:12px;color:#8ea0b8;" id="kbcBhex"></div>
    </div>

    <input id="kbcInput" placeholder="答えはここに" style="width:80%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:inherit;font-size:14px;">
    <div style="height:10px;"></div>
    <button id="kbcVerify" style="padding:10px 18px;border-radius:8px;border:none;background:#3b82f6;color:#fff;cursor:pointer;font-weight:600;">確認</button>
    <button id="kbcClose" style="margin-left:8px;padding:10px 12px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:#9fb0c8;cursor:pointer;">閉じる</button>
    <p id="kbcMsg" style="margin-top:12px;color:#fca5a5;display:none;"></p>
  `;
  overlay.appendChild(card);
  document.body.appendChild(overlay);

  const inputEl = card.querySelector("#kbcInput");
  const verifyBtn = card.querySelector("#kbcVerify");
  const closeBtn = card.querySelector("#kbcClose");
  const msgEl = card.querySelector("#kbcMsg");
  const codeAEl = card.querySelector("#kbcA");
  const codeAHexEl = card.querySelector("#kbcAhex");
  const codeBEl = card.querySelector("#kbcB");
  const codeBHexEl = card.querySelector("#kbcBhex");

  let codeA, codeB, correctAnswer;

  // コード生成関数
  function regenerateCodes() {
    codeA = randomUint32();
    const tmp = new Uint32Array(1);
    crypto.getRandomValues(tmp);
    const targetStep = tmp[0] >>> 0;
    codeB = advanceXorshift32(codeA, targetStep);
    correctAnswer = Math.floor(targetStep / 2) >>> 0;

    codeAEl.textContent = codeA;
    codeAHexEl.textContent = hex32(codeA);
    codeBEl.textContent = codeB;
    codeBHexEl.textContent = hex32(codeB);
  }

  regenerateCodes(); // 初回生成

  function showMsg(m, ok = false) {
    msgEl.style.display = "block";
    msgEl.style.color = ok ? "#a7f3d0" : "#fca5a5";
    msgEl.textContent = m;
  }

  function closeOverlay() {
    if (!overlayOpen) return;
    overlayOpen = false;
    overlay.remove();
  }

  verifyBtn.addEventListener("click", () => {
    const raw = inputEl.value.trim();
    if (!/^\d+$/.test(raw)) {
      showMsg("整数を入力してください。");
      return;
    }
    const v = parseInt(raw, 10) >>> 0;
    if (v === correctAnswer) {
      showMsg("認証成功！移動します…", true);
      setTimeout(() => {
        closeOverlay();
        window.location.href = "KBC.CSS設定.HTML"; // 遷移先を変更可
      }, 600);
    } else {
      showMsg("コードが違いますよ笑。");
      regenerateCodes();
      inputEl.value = "";
      inputEl.focus();
    }
  });

  closeBtn.addEventListener("click", closeOverlay);
  overlay.addEventListener("click", e => { if (e.target === overlay) closeOverlay(); });
  inputEl.focus();
}
</script>

</html>